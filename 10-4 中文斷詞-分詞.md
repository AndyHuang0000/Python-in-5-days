# 10-4 中文斷詞-分詞

### 由詞彙長度作為優先分詞的依據

```
專案
 |__ lexicon.txt   (自製詞表, 每行一個詞)
 |__ data.txt
 |__ main.py
```



## 1.讀入檔 data.txt
```
大家好，我是仲基。
真的好久沒這樣跟大家打招呼了。
像這樣久違地向大家打招呼，是因為比起誰都更想收到祝福，比起任何時候都還要緊張，但還是想傳達我的真心。
最近，我遇到了讓我更加耀眼的光榮作品。託大家給的滿滿的愛，那段時間對我來說，也是相當充實、幸福的經驗。一同經歷那段幸福的時間後，我身邊出現了一名珍貴的朋友，在確認彼此的真心後，成為了親愛的戀人。
2017年的一開始，我們兩人約好，在日後的人生也要一起度過，用愛情填補彼此的不足，為了迎向希的人生，我們會一起共度困難，我將在2017年10月的最後一天，和宋慧喬小姐舉行婚禮。
因為這突如其來的消息，喜愛我的許多粉絲都會感到相當堂皇。我也想早點傳達給大家我的真心，但這不是只有我的事情，我們兩人和家人的意見也很重要，所以在各方面都要慎重及小心。
還有，集結許多人的熱情和努力所創作出的電影也即將上映，我深怕因為演員個人私事，而以影響到現場傾盡全力的製作組們，所以相當小心，若有不足之處，拜託大家以寬厚的心情理解。
這讓我想起了初次開始演戲時所下的決心。
作為演員活著，比起往上爬，我要成為能照顧周圍，拓展視野的人，不是像天邊的星星般難以碰觸的明星，而是在各位的身邊，可以更靠近、更溫暖、更親切、更美麗、有責任感的鄰居，我是這樣下定決心生活的。
我曾聽過人生重要的不是速度，而是方向。為了走得快一點，直到現在沒能好好看的風景、價值和人，為了好好欣賞，我要向各位身上學到的一樣，一步步、有智慧地好好走下去。
如果大家能為我相信的價值加油就好了。
往後這份心意也不會改變，會作為演員、一個家庭可靠的家長繼續生活。
請多多為我們兩人的美好姻緣加油。
謝謝。



大家好，我是慧喬。
久違地向各位向慧葵(宋慧喬粉絲名)問候。
我想在從我出道剛開始，就和我在一起的這個空間裡的各位粉絲們，傳達我個人的消息。突然聽到我的結婚消息，各位應該嚇到了吧。也許對各位，許多人會覺得我不夠體貼粉絲，或可能有些驚慌，但希望各位能以寬容的心給予理解。
我和仲基一開始是很有默契的同事，在一起拍攝作品的過程中，我感受到我們的價值觀和想法都很相似，不論什麼話題我們都很談得來。他對我而言是好同事、好朋友，所以在電視劇結束後，我們還是會和對方聯絡，並度過了更加了解彼此的時間。
在這之後的長時間，因為仲基對我展現的信任與信賴，讓我覺得可以和他一起共度未來，我也充分感受到他對我的真心，並對此相當感謝，另外，這也讓我對他更有信心。
雖然我要結婚的消息，最想先告訴各位粉絲，但因為這不是我一個人可以做決定的事情，所以我非常地謹慎。
突然像這樣發表結婚消息讓我感到很緊張，但我也相信粉絲們會為我加油。就像各位總是毫不猶豫地支持、相信我的選擇一樣，因此未來也請各位多多給予喜愛。再次感謝直到我告訴大家為止，默默地信任我、等待著我的各位粉絲，
從現在起，因為不是一個人而是兩個人，我會更加關心我的週遭，好好地過生活。
請多多給予祝福。
謝謝。
```




## 2.main.py
```
#===========================
# (1)讀入詞庫
#===========================
lexicon=set()

with open('terms.txt', 'r', encoding='UTF-8') as file:
    for data in file.readlines():
        data=data.strip()
        lexicon.add(data)


#===========================
# (2)讀入文檔, 與詞庫比對
#===========================
output=[]

with open('data.txt', 'r', encoding='UTF-8') as file:
    data = file.read()

    output=[]
    index=0
    size=8

    while True:
        #如果由文章開始比對處向後8個字的詞存在詞庫中, 就輸出;
        #若無再以7, 6, 5,...長度逐次減少比對.
        if data[index:index+size] in lexicon:
            output.append(data[index:index+size])
            index=index+size
            size=8
        else:
            size=size-1

        #長度為0, 表示如果那個字不在詞庫中
        #以單一文字輸出, 比對點向後退一格.
        if size==0:
            output.append(data[index])
            index=index+1
            size=8

        #比對詞不超過文章長度
        size=min(size, len(data)-index)

        #如果全篇文章已完成分詞
        if index == len(data):
            break

for k in output:
    print(k)
```




## 3.執行結果
```
大家
好
，
我
是
仲
基
。


真的
好
久
沒
這樣
跟
大家
打招呼
... (略)
```

